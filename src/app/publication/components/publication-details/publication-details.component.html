<article class="container container--maxwidth" [ngClass.lt-lg]="{ 'container__publication-maxwidth': true }" *ngIf="publication">
  <h1 class="container__title">Detalles de {{ publication.name | capitalize }}</h1>
  <div align="end">
    <button
      *ngIf="isAuthor || isAdmin"
      class="container__button-more"
      mat-icon-button
      [matMenuTriggerFor]="menu"
      matTooltip="{{ 'more_options' | translate }}"
      aria-label="More options"
    >
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item (click)="onDeletePublication()">
        <mat-icon>delete</mat-icon>
        <span>{{ "delete" | translate }}</span>
      </button>
      <button mat-menu-item *ngIf="!isAdopted" (click)="onEditPublication()">
        <mat-icon>edit</mat-icon>
        <span>{{ "edit" | translate }}</span>
      </button>
      <button mat-menu-item *ngIf="!isAdopted" (click)="onMarkAsAdopted()">
        <mat-icon>pets</mat-icon>
        <span>{{ "mark_as_adopted" | translate }}</span>
      </button>
    </mat-menu>
  </div>
  <!-- <div >
      <button (click)="onDeletePublication()">{{ "delete" | translate }}</button>
      <button *ngIf="!isAdopted" (click)="onEditPublication()">{{ "edit" | translate }}</button>
      <button *ngIf="!isAdopted" (click)="onMarkAsAdopted()">{{ "mark_as_adopted" | translate }}</button>
    </div> -->

  <div
    class="container__publication"
    fxLayout.lt-lg="column"
    fxLayoutGap.gt-md="100px"
    fxLayoutGap.lt-lg="30px"
    fxLayoutAlign.lt-lg="center center"
    fxLayout.gt-md="row"
    fxLayoutAlign.gt-md="start start"
  >
    <section class="container__section" aria-label="Detalle de la publicación" fxFlex="1 1 auto">
      <div fxLayout="column" fxLayoutGap="16px">
        <div class="container__carrousel">
          <mat-carousel
            timings="250ms ease-in"
            [autoplay]="true"
            color="warn"
            [loop]="false"
            [hideArrows]="publication.images.length === 1"
            [hideIndicators]="publication.images.length === 1"
            [useMouseWheel]="false"
            orientation="ltr"
            [maintainAspectRatio]="false"
            slideHeight="500px"
            maxWidth="500px"
            class="carrousel"
          >
            <mat-carousel-slide #matCarouselSlide *ngFor="let image of publication.images; let i = index" [image]="image.url" [hideOverlay]="true"></mat-carousel-slide>
          </mat-carousel>
        </div>
        <div fxLayout="row" fxLayoutAlign="space-between start">
          <div>
            <p>{{ publication.date | amLocale: translateService.currentLang | amDateFormat: "DD-MM-YYYY" }}</p>
            <p class="container__tag">{{ publication.state | translate | uppercase }}</p>
          </div>

          <div fxLayout="row" fxLayoutAlign="center center">
            <button mat-icon-button (click)="onSharePublication()" matTooltip="{{ 'share' | translate }}">
              <mat-icon>share</mat-icon>
            </button>
            <button *ngIf="isClient" mat-icon-button (click)="onChangeFavorite(isFavorite ? -1 : +1)">
              <mat-icon *ngIf="isFavorite" matTooltip="{{ 'favorite_not_border' | translate }}">favorites</mat-icon>
              <mat-icon *ngIf="!isFavorite" matTooltip="{{ 'favorite_border' | translate }}">favorite_border</mat-icon>
            </button>
            <span *ngIf="isClient" class="container__item-title">{{ countFavorites }}</span>
          </div>
        </div>
        <!-- <button (click)="onSharePublication()">{{ "share" | translate }}</button> -->
        <!-- <button (click)="onChangeFavorite(+1)" *ngIf="isClient && !isFavorite">Corazon sin rellenar</button> -->
        <!-- <h4 *ngIf="isClient">{{ "favorites" | translate }}:</h4> -->
        <!-- <span *ngIf="isClient">{{ countFavorites }}</span> -->

        <p class="container__item-title">{{ "description" | translate }}</p>
        <p>{{ publication.description | capitalize }}</p>

        <!-- <h4>{{ "breed" | translate }}</h4>
        <h4>{{ "province" | translate }}</h4>
        <h4>{{ "type" | translate }}</h4>
        <h4>{{ "state" | translate }}</h4>
        <h4>{{ "size" | translate }}</h4>
        <h4>{{ "sex" | translate }}</h4>
        <h4>{{ "age" | translate }}</h4> -->

        <mat-list class="container__pet" fxLayout.gt-xs="row wrap" fxLayout.lt-sm="column" role="list">
          <mat-list-item fxFlex.gt-xs="50%" role="listitem">
            <mat-icon mat-list-icon matTooltip="{{ 'breed' | translate }}">category</mat-icon>
            <p mat-line>{{ publication.breed | titlecase }}</p>
          </mat-list-item>

          <mat-list-item fxFlex.gt-xs="50%" role="listitem">
            <mat-icon mat-list-icon matTooltip="{{ 'type' | translate }}">pets</mat-icon>
            <p mat-line>{{ publication.type | translate }}</p>
          </mat-list-item>

          <mat-list-item fxFlex.gt-xs="50%" role="listitem">
            <mat-icon mat-list-icon matTooltip="{{ 'size' | translate }}" svgIcon="size" aria-hidden="false" aria-label="Size icon"></mat-icon>
            <p mat-line>{{ publication.size | translate }}</p>
          </mat-list-item>
          <mat-list-item fxFlex.gt-xs="50%" role="listitem">
            <mat-icon mat-list-icon matTooltip="{{ 'sex' | translate }}" svgIcon="sex" aria-hidden="false" aria-label="Sex icon"></mat-icon>
            <p mat-line>{{ publication.sex | translate }}</p>
          </mat-list-item>
          <mat-list-item fxFlex.gt-xs="50%" role="listitem">
            <mat-icon mat-list-icon matTooltip="{{ 'age' | translate }}" svgIcon="age" aria-hidden="false" aria-label="Age icon"></mat-icon>
            <p mat-line>{{ publication.age | translate }}</p>
          </mat-list-item>
          <mat-list-item fxFlex.gt-xs="50%" role="listitem">
            <mat-icon mat-list-icon matTooltip="{{ 'chip' | translate }}" svgIcon="chip" aria-hidden="false" aria-label="Chip icon"></mat-icon>
            <p mat-line translate="{{ 'chip.' + publication.chip }}"></p>
          </mat-list-item>
          <mat-list-item fxFlex.gt-xs="50%" role="listitem">
            <mat-icon mat-list-icon matTooltip="{{ 'vaccinate' | translate }}" svgIcon="vaccinate" aria-hidden="false" aria-label="Vaccinate icon"></mat-icon>
            <p mat-line translate="{{ 'vaccinate.' + publication.vaccinate }}"></p>
          </mat-list-item>
          <mat-list-item fxFlex.gt-xs="50%" role="listitem">
            <mat-icon mat-list-icon matTooltip="{{ 'sterile' | translate }}">child_friendly</mat-icon>
            <p mat-line translate="{{ 'sterile.' + publication.sterile }}"></p>
          </mat-list-item>
          <mat-list-item fxFlex.gt-xs="50%" role="listitem">
            <mat-icon mat-list-icon matTooltip="{{ 'dewormed' | translate }}">sanitizer</mat-icon>
            <p mat-line translate="{{ 'dewormed.' + publication.dewormed }}"></p>
          </mat-list-item>
          <mat-list-item fxFlex.gt-xs="50%" role="listitem">
            <mat-icon mat-list-icon matTooltip="{{ 'shipping' | translate }}" svgIcon="dispatch" aria-hidden="false" aria-label="Dispatch icon"></mat-icon>
            <p mat-line translate="{{ 'shipping.' + publication.shipping }}"></p>
          </mat-list-item>
          <mat-list-item>
            <mat-icon mat-list-icon matTooltip="{{ 'province' | translate }}">location_on</mat-icon>
            <p mat-line>{{ publication.province }}</p>
          </mat-list-item>
        </mat-list>
      </div>
    </section>

    <aside fxFlex="1 1 50%" fxFlex.lt-lg="1 1 auto" fxFlexFill>
      <div *ngIf="author" class="container__aside-author" [ngClass.lt-sm]="{ 'container__aside-author--padding': true }">
        <mat-nav-list class="container__aside-nav">
          <a mat-list-item routerLink="/user/profile/{{ author.id }}">
            <mat-icon mat-list-icon class="container__mat-icon">how_to_reg</mat-icon>
            <p mat-line>{{ author.name | titlecase }}</p>
            <mat-icon>chevron_right</mat-icon>
          </a>
        </mat-nav-list>

        <button mat-flat-button color="primary" (click)="onContactAuthor()">{{ "to_contact" | translate }}</button>
      </div>

      <!-- <div class="container__aside-share">
        <button mat-raised-button color="primary" (click)="onSharePublication()">{{ "share" | translate }}</button>
      </div> -->
    </aside>
  </div>
</article>

<!-- <div>
    <p>Comparte esta publicación</p>
    <a href="https://www.facebook.com/sharer/sharer.php?u={{ actualURL }}" target="_blank" rel="noopener noreferrer"> Facebook </a>
    <a href="https://twitter.com/share?&url={{ actualURL }}&text={{ encode('shared_message_link' | translate) }}" target="_blank" rel="noopener noreferrer"> Twitter </a>
    <a href="https://wa.me/send?text={{ encode('shared_message_link' | translate) }}{{ actualURL }}" target="_blank" rel="noopener noreferrer"> Whatsapp </a>
    <a href="mailto:?body={{ encode('shared_message_link' | translate) }}{{ actualURL }}" target="_blank" rel="noopener noreferrer"> Email </a>
    <a href="fb-messenger://share/?link={{ actualURL }}" target="_blank" rel="noopener noreferrer">Messenger</a>
    <button (click)="copyLinkToClipboard()">Copy link</button>
  </div> -->

<!-- <div *ngIf="author">
    <p>Contactar</p>
    <a href="tel:{{ getTelephoneComplete() }}" target="_blank" rel="noopener noreferrer">Phone</a>
    <a href="sms:{{ getTelephoneComplete() }}&body={{ encode('contact_you' | translate) }}" target="_blank" rel="noopener noreferrer">SMS</a>
    <a href="https://wa.me/{{ getTelephoneComplete() }}?text={{ encode('contact_you' | translate) }}" target="_blank" rel="noopener noreferrer">WhatsApp</a>
    <a href="mailto:{{ author.email }}?body={{ encode('contact_you' | translate) }}" target="_blank" rel="noopener noreferrer">Email</a>
  </div> -->

<!-- <a href="https://www.facebook.com/sharer/sharer.php?u={{ actualURL }}" target="_blank" rel="noopener noreferrer"> Facebook </a>
    <a href="https://twitter.com/share?&url={{ actualURL }}&hashtags=Mascotas,Adoptar" target="_blank" rel="noopener noreferrer"> Twitter </a>
    <a href="https://wa.me/send?text={{ actualURL }}" target="_blank" rel="noopener noreferrer"> Whatsapp </a>
    <a href="mailto:?body={{ actualURL }}" target="_blank" rel="noopener noreferrer"> Email </a> -->

<!-- <a href="https://pinterest.com/pin/create/button/?url={{ actualURL }}" target="_blank" rel="noopener noreferrer"> Pinterest </a> -->
<!-- <a href="https://plus.google.com/share?url={{ actualURL }}" target="_blank" rel="noopener noreferrer"> Google Plus </a> -->

<!-- CONTACT -->
<!-- <a class="item__link" href="mailto:{{ ownerPublication.email }}" role="button" target="_blank" rel="noopener noreferrer">{{ ownerPublication.email }}</a>
  <a class="item__link" href="tel:{{ ownerPublication.telephone }}" role="button" target="_blank" rel="noopener noreferrer">{{ ownerPublication.telephone }}</a> -->
<!-- <a href="sms:+18664504185&body=Hi%2520there%252C%2520I%2527d%2520like%2520to%2520place%2520an%2520order%2520for...">Click here to text us!</a> -->
<!-- <a href="https://wa.me/${code+number}?text=Hola,%20me%20gustaría%20ponerme%20en%20contacto%20contigo." target="_blank" rel="noopener noreferrer">WhatsApp</a> -->
<!-- <a class="item__shareLink item__shareLink--linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url={{ actualURL }}" target="_blank" rel="noopener noreferrer">
          <i class="item__icon fab fa-linkedin-in"></i>
        </a> -->

<!-- SHARED -->
<!-- https://www.facebook.com/sharer.php?u=https%3A%2F%2Fwww.milanuncios.com%2Fjuegos-de-playstation%2Fmoto-gp-4-playstation-2-ps2-430103249.htm%3Fstc%3Dsm-facebook-send_friend -->
<!-- http://twitter.com/share?url=https%3A%2F%2Fwww.milanuncios.com%2Fjuegos-de-playstation%2Fmoto-gp-4-playstation-2-ps2-430103249.htm%3Fstc%3Dsm-twitter-send_friend&text=+.+Moto+GP+4.PlayStation+2.+PS2. -->
<!-- <a href="mailto:?subject=I wanted you to see this site&amp;body=Check out this site http://www.website.com." title="Share by Email"></a> -->
<!-- https://twitter.com/intent/tweet?url=https%3A%2F%2Fpetfinder.ricardmolinaferret.com%2Fpet%2F60754d75fa25890850d0cd32&text=Necesitamos%20tu%20ayuda%20para%20encontrar%20a%20Mila%2C%20una%20adorable%20mascota%20perdida%20desde%20hace%20unos%20dias -->
<!-- https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fpetfinder.ricardmolinaferret.com%2Fpet%2F60754d75fa25890850d0cd32 -->
