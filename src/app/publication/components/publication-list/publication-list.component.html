<!-- <main class="container" [ngClass.xs]="{ 'container--padding': true }">
  <!-- <div
    *ngIf="currentURL.includes('/publication/list')"
    fxLayoutAlign="start start"
    fxLayout="row"
    fxLayout.lt-md="column"
    fxLayoutAlign.lt-md="start center"
    fxLayoutGap.gt-sm="4rem"
  >
    <div [ngClass.lt-md]="{ container__filter: true }">
      <div align="end">
        <button mat-icon-button fxHide fxShow.xs="true" fxShow.sm="false" (click)="showFilter = !showFilter">
          <mat-icon matTooltip="{{ 'filters' | translate }}">filter_list</mat-icon>
        </button>
      </div>

      <div fxShow [fxShow.xs]="showFilter">
        <h3>{{ "filters" | translate }}</h3>
        <mat-form-field appearance="fill">
          <mat-label>{{ "province" | translate }}</mat-label>
          <mat-select [formControl]="province" (selectionChange)="onChangeFilter({ filter: 'province', value: $event.value })">
            <mat-option value="">{{ "all" | translate }}</mat-option>
            <mat-option *ngFor="let province of provinces" [value]="province">{{ province }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>{{ "type" | translate }}</mat-label>
          <mat-select [formControl]="type" (selectionChange)="onChangeFilter({ filter: 'type', value: $event.value })">
            <mat-option value="">{{ "all" | translate }}</mat-option>
            <mat-option *ngFor="let type of types" [value]="type">{{ type | translate }}</mat-option>
          </mat-select>
        </mat-form-field>
        <button mat-flat-button color="primary" (click)="resetFilter()" [disabled]="!filterPublication.get('type').value && !filterPublication.get('province').value">
          Limpiar
        </button>
      </div>  -->

<!-- <select
        class="main__select"
        id="size"
        [formControl]="province"
        [value]="filterPublication.value.province"
        (ngModelChange)="onChangeFilter({ filter: 'province', value: $event })"
      >
        <option value="" selected>{{ "all" | translate }}</option>
        <option *ngFor="let province of provinces" value="{{ province }}" [selected]="filterPublication.value.province === province">{{ province }}</option>
      </select> -->
<!-- <p>{{ "type" | translate }}</p>
      <select class="main__select" id="size" [formControl]="type" [value]="filterPublication.value.type" (ngModelChange)="onChangeFilter({ filter: 'type', value: $event })">
        <option value="" selected>{{ "all" | translate }}</option>
        <option *ngFor="let type of types" value="{{ type }}" [selected]="filterPublication.value.type === type">{{ type | translate }}</option>
      </select> -->
<!-- </div> -->

<!-- flex: 1 1 auto; filter a width 80 y los promises en filters, scrolled -->
<!-- <div class="container__list-items" fxFlex="1 1 90%">
      <ng-container *ngIf="itemsLoaded | async; else loading">
        <div *ngIf="publications && publications.length !== 0; else noResults" fxLayoutAlign="start start" fxLayout="row wrap" fxLayoutAlign.lt-md="center start">
          <app-publication-item
            *ngFor="let publication of publications; trackBy: trackByFn; let last = last"
            class="item"
            [ngClass]="{ last: last }"
            [publication]="publication"
            [currentUser]="user"
            (onChangePublication)="onChangePublication($event)"
          ></app-publication-item>

          <div class="search-results" infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="onScroll()"></div> -->

<!-- <div class="container__wait" *ngIf="!finished" fxLayout="row" fxLayoutAlign="center center">
          <app-loading></app-loading>
        </div> -->
<!-- <div *ngIf="finished">Eso son todos los datos de la BD</div> -->
<!-- </div>
      </ng-container>

      <ng-template #loading>
        <div class="container__wait" fxLayout="row" fxLayoutAlign="center center">
          <app-loading [diameter]="40"></app-loading>
        </div>
      </ng-template>

      <ng-template #noResults>
        <app-no-results></app-no-results>
      </ng-template>
    </div>
  </div>

  <div *ngIf="!currentURL.includes('/publication/list')">
    <div *ngIf="currentURL.includes('/publication/favorites')">
      <h1>{{ "your_favorites" | translate }}</h1>
      <p>{{ "favorites_description" | translate }}</p>
    </div>

    <div *ngIf="currentURL.includes('/publication/my-publications')">
      <h1>{{ "your_publications" | translate }}</h1>
      <p>{{ "publications_description" | translate }}</p>
      <div align="end">
        <button type="button" mat-raised-button color="primary" (click)="onCreatePublication()" matTooltip="{{ 'to_post' | translate }}">
          <mat-icon>playlist_add</mat-icon>
        </button>
      </div>

      <app-menu-tabs *ngIf="user" [links]="links" (newLinkEvent)="onChange($event)"></app-menu-tabs>
    </div>

    <ng-container *ngIf="itemsLoaded | async; else loading">
      <div *ngIf="publications && publications.length !== 0; else noResults" fxLayoutAlign="start start" fxLayout="row wrap" fxLayoutAlign.lt-md="center start">
        <app-publication-item
          *ngFor="let publication of publications; trackBy: trackByFn; let last = last"
          [ngClass]="{ last: last }"
          [publication]="publication"
          [currentUser]="user"
          (onChangePublication)="onChangePublication($event)"
        ></app-publication-item>

        <div class="search-results" infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="onScroll()"></div> -->
<!-- <div class="container__wait" fxLayout="row" fxLayoutAlign="center center" *ngIf="!finished">
          <app-loading [diameter]="40"></app-loading>
        </div> -->
<!-- <app-loading *ngIf="!finished"></app-loading> -->
<!-- <div *ngIf="finished">Eso son todos los datos de la BD</div> -->
<!-- </div>
    </ng-container>

    <ng-template #loading>
      <div class="container__wait" fxLayout="row" fxLayoutAlign="center center">
        <app-loading [diameter]="40"></app-loading>
      </div>
    </ng-template>

    <ng-template #noResults>
      <app-no-results></app-no-results>
    </ng-template>
  </div>
</main> -->

<!-- <div *ngIf="publications && publications.length !== 0" class="search-results" infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="onScroll()"></div> -->

<main class="container" [ngClass.xs]="{ 'container--padding': true }">
  <div fxLayoutAlign="start start" fxLayout="row" fxLayout.lt-md="column" fxLayoutAlign.lt-md="start center" fxLayoutGap.gt-sm="4rem">
    <div *ngIf="currentURL.includes('/publication/list')" [ngClass.lt-md]="{ container__filter: true }">
      <div align="end">
        <button mat-icon-button fxHide fxShow.xs="true" fxShow.sm="false" (click)="showFilter = !showFilter">
          <mat-icon matTooltip="{{ 'filters' | translate }}">filter_list</mat-icon>
        </button>
      </div>

      <div fxShow [fxShow.xs]="showFilter">
        <h3>{{ "filters" | translate }}</h3>
        <mat-form-field appearance="fill">
          <mat-label>{{ "province" | translate }}</mat-label>
          <mat-select [formControl]="province" (selectionChange)="onChangeFilter({ filter: 'province', value: $event.value })">
            <mat-option value="">{{ "all" | translate }}</mat-option>
            <mat-option *ngFor="let province of provinces" [value]="province">{{ province }}</mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>{{ "type" | translate }}</mat-label>
          <mat-select [formControl]="type" (selectionChange)="onChangeFilter({ filter: 'type', value: $event.value })">
            <mat-option value="">{{ "all" | translate }}</mat-option>
            <mat-option *ngFor="let type of types" [value]="type">{{ type | translate }}</mat-option>
          </mat-select>
        </mat-form-field>
        <button mat-flat-button color="primary" (click)="resetFilter()" [disabled]="!filterPublication.get('type').value && !filterPublication.get('province').value">
          Limpiar
        </button>
      </div>

      <!-- <select
        class="main__select"
        id="size"
        [formControl]="province"
        [value]="filterPublication.value.province"
        (ngModelChange)="onChangeFilter({ filter: 'province', value: $event })"
      >
        <option value="" selected>{{ "all" | translate }}</option>
        <option *ngFor="let province of provinces" value="{{ province }}" [selected]="filterPublication.value.province === province">{{ province }}</option>
      </select> -->
      <!-- <p>{{ "type" | translate }}</p>
      <select class="main__select" id="size" [formControl]="type" [value]="filterPublication.value.type" (ngModelChange)="onChangeFilter({ filter: 'type', value: $event })">
        <option value="" selected>{{ "all" | translate }}</option>
        <option *ngFor="let type of types" value="{{ type }}" [selected]="filterPublication.value.type === type">{{ type | translate }}</option>
      </select> -->
    </div>

    <div class="container__list-items" fxFlex="1 1 auto">
      <div *ngIf="currentURL.includes('/publication/favorites')">
        <h1>{{ "your_favorites" | translate }}</h1>
        <p>{{ "favorites_description" | translate }}</p>
      </div>

      <div *ngIf="currentURL.includes('/publication/my-publications')">
        <h1>{{ "your_publications" | translate }}</h1>
        <p>{{ "publications_description" | translate }}</p>
        <div align="end">
          <button type="button" mat-raised-button color="primary" (click)="onCreatePublication()" matTooltip="{{ 'to_post' | translate }}">
            <mat-icon>playlist_add</mat-icon>
          </button>
        </div>

        <app-menu-tabs *ngIf="user" [links]="links" (newLinkEvent)="onChange($event)"></app-menu-tabs>
      </div>

      <ng-container *ngIf="itemsLoaded | async; else loading">
        <div *ngIf="publications && publications.length !== 0; else noResults" fxLayoutAlign="start start" fxLayout="row wrap" fxLayoutAlign.lt-md="center start">
          <app-publication-item
            *ngFor="let publication of publications; trackBy: trackByFn; let last = last"
            class="item"
            [ngClass]="{ last: last }"
            [publication]="publication"
            [currentUser]="user"
            (onChangePublication)="onChangePublication($event)"
          ></app-publication-item>

          <div class="search-results" infiniteScroll [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="onScroll()"></div>
        </div>

        <!-- Scrolled -->
        <!-- <div *ngIf="!finished" class="container__wait" fxLayout="row" fxLayoutAlign="center center">
          <app-loading [diameter]="40"></app-loading>
        </div> -->
        <!-- <div *ngIf="finished">Eso son todos los datos de la BD</div> -->
      </ng-container>

      <ng-template #loading>
        <div class="container__wait" fxLayout="row" fxLayoutAlign="center center">
          <app-loading [diameter]="40"></app-loading>
        </div>
      </ng-template>

      <ng-template #noResults>
        <app-no-results></app-no-results>
      </ng-template>
    </div>
  </div>
</main>
