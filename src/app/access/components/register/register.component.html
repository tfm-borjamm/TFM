<!-- <main class="main">
  <div class="main__container">
    <h1 class="main__title" *ngIf="!currentUserId">{{ "register" | translate }}</h1>
    <h1 class="main__title" *ngIf="currentUserId">{{ "new_user" | translate }}</h1>
    <form class="main__form" [formGroup]="registerForm" (ngSubmit)="onRegister()">
      <ul class="main__list">
        <li class="main__item">
          <label class="main__label" for="name">{{ "name" | translate }} (*)</label>
          <input class="main__input" type="text" id="name" [formControl]="name" placeholder="{{ 'name' | translate }}" />
          <div class="errors" *ngIf="registerForm.get('name').errors && (registerForm.get('name').touched || registerForm.get('name').dirty)">
            <span class="errors__msg" *ngIf="registerForm.get('name').errors.required">Este campo es obligatorio</span>
            <span class="errors__msg" *ngIf="registerForm.get('name').errors.minlength">Este campo debe tener mínimo 3 caracteres</span>
            <span class="errors__meg" *ngIf="registerForm.get('name').errors.maxlength">Este campo no debe tener más de 55 caracteres</span>
            <span class="errors__msg" *ngIf="registerForm.get('name').errors.pattern">Este campo no debe tener espacios ni caracteres especiales</span>
          </div>
        </li>
        <li class="main__item">
          <label class="main__label" for="email">{{ "email" | translate }} (*)</label>
          <input class="main__input" type="email" id="email" [formControl]="email" placeholder="{{ 'email' | translate }}" />
          <div class="errors" *ngIf="registerForm.get('email').errors && (registerForm.get('email').touched || registerForm.get('email').dirty)">
            <span class="errors__msg" *ngIf="registerForm.get('email').errors.required">Este campo es obligatorio</span>
            <span
              class="errors__msg"
              *ngIf="!registerForm.get('email').errors.required && (registerForm.get('email').errors.email || registerForm.get('email').errors.emailValidator)"
              >El email no tiene un formato válido</span
            >
          </div>
        </li>
        <li class="main__item">
          <label class="main__label" for="cp">{{ "postal_code" | translate }} (*)</label>
          <input class="main__input" type="text" id="cp" [formControl]="cp" placeholder="{{ 'postal_code' | translate }}" />
          <div class="errors" *ngIf="registerForm.get('cp').errors && (registerForm.get('cp').touched || registerForm.get('cp').dirty)">
            <span class="errors__msg" *ngIf="registerForm.get('cp').errors.required">Este campo es obligatorio</span>
            <span class="errors__msg" *ngIf="registerForm.get('cp').errors.pattern">Este campo sólo puede contener números</span>
            <span class="errors__msg" *ngIf="registerForm.get('cp').errors.maxlength || registerForm.get('cp').errors.minlength">Este campo debe tener 5 dígitos</span>
          </div>
        </li>

        <li class="main__item">
          <label class="main__label" for="street">{{ "street" | translate }} (*)</label>
          <input class="main__input" type="text" id="street" [formControl]="street" placeholder="{{ 'street' | translate }}" />
          <div class="errors" *ngIf="registerForm.get('street').errors && (registerForm.get('street').touched || registerForm.get('street').dirty)">
            <span class="errors__msg" *ngIf="registerForm.get('street').errors.required">Este campo es obligatorio</span>
          </div>
        </li>

        <li class="main__item">
          <label class="main__label" for="code">{{ "code" | translate }} (*)</label>
          <select class="main__select" id="code" [formControl]="code" [value]="registerForm.value.code">
            <option value="" disabled selected>{{ "select_a_code" | translate }}</option>
            <option *ngFor="let code of codes" value="{{ code }}" [selected]="registerForm.value.code === code ? true : false">
              {{ code }}
            </option>
          </select>
          <div class="errors" *ngIf="registerForm.get('code').errors && (registerForm.get('code').touched || registerForm.get('code').dirty)">
            <span class="errors__msg" *ngIf="registerForm.get('code').errors.required">Este campo es obligatorio</span>
          </div>
        </li>

        <li class="main__item">
          <label class="main__label" for="telephone">{{ "telephone" | translate }} (*)</label>
          <input class="main__input" type="text" id="telephone" [formControl]="telephone" placeholder="{{ 'telephone' | translate }}" />
          <div class="errors" *ngIf="registerForm.get('telephone').errors && (registerForm.get('telephone').touched || registerForm.get('telephone').dirty)">
            <span class="errors__msg" *ngIf="registerForm.get('telephone').errors.required">Este campo es obligatorio</span>
            <span class="errors__msg" *ngIf="registerForm.get('telephone').errors.pattern">Este campo sólo puede contener dígitos</span>
            <span class="errors__msg" *ngIf="registerForm.get('telephone').errors.maxlength || registerForm.get('telephone').errors.minlength"
              >Este campo debe tener 9 dígitos</span
            >
          </div>
        </li>

        <li class="main__item">
          <label class="main__label" for="role">{{ "account_type" | translate }} (*)</label>
          <select class="main__select" id="role" [formControl]="role" [value]="registerForm.value.role">
            <option value="" disabled selected>{{ "select_a_role" | translate }}</option>
            <option *ngFor="let role of roles" value="{{ role }}" [selected]="registerForm.value.role === role">{{ role | translate }}</option>
          </select>
          <div class="errors" *ngIf="registerForm.get('role').errors && (registerForm.get('role').touched || registerForm.get('role').dirty)">
            <span class="errors__msg" *ngIf="registerForm.get('role').errors.required">Este campo es obligatorio</span>
          </div>
        </li>

        <li class="main__item">
          <label class="main__label" for="province">{{ "province" | translate }} (*)</label>
          <select class="main__select" id="province" [formControl]="province" [value]="registerForm.value.province">
            <option value="" disabled selected>{{ "select_a_province" | translate }}</option>
            <option *ngFor="let province of provinces" value="{{ province }}" [selected]="registerForm.value.province === province ? true : false">{{ province }}</option>
          </select>
          <div class="errors" *ngIf="registerForm.get('province').errors && (registerForm.get('province').touched || registerForm.get('province').dirty)">
            <span class="errors__msg" *ngIf="registerForm.get('province').errors.required">Este campo es obligatorio</span>
          </div>
        </li>

        <li class="main__item">
          <label class="main__label" for="password">{{ "password" | translate }} (*)</label>
          <input class="main__input" type="password" id="password" [formControl]="password" placeholder="{{ 'password' | translate }}" />
          <div
            class="errors"
            *ngIf="registerForm.get('passwords.password').errors && (registerForm.get('passwords.password').touched || registerForm.get('passwords.password').dirty)"
          >
            <span class="errors__msg" *ngIf="registerForm.get('passwords.password').errors?.required">Este campo es obligatorio</span>
            <span class="errors__msg" *ngIf="registerForm.get('passwords.password').errors?.minlength">Este campo debe tener mínimo 8 caracteres</span>
          </div>
        </li>

        <li class="main__item">
          <label class="main__label" for="repeat_password">{{ "confirm_password" | translate }} (*)</label>
          <input class="main__input" type="password" id="repeat_password" [formControl]="repeat_password" placeholder="{{ 'confirm_password' | translate }}" />
          <div
            class="errors"
            *ngIf="
              (registerForm.get('passwords').errors || registerForm.get('passwords.repeat_password').errors) &&
              (registerForm.get('passwords.repeat_password').touched || registerForm.get('passwords.repeat_password').dirty)
            "
          >
            <span class="errors__msg" *ngIf="registerForm.get('passwords.repeat_password').errors?.required">Este campo es obligatorio</span>
            <span class="errors__msg" *ngIf="!registerForm.get('passwords.repeat_password').errors?.invalidMatch && !registerForm.get('passwords.repeat_password').errors?.required"
              >Las contraseñas no coinciden</span
            >
            <span class="errors__msg" *ngIf="registerForm.get('passwords.repeat_password').errors?.minlength">Este campo debe tener mínimo 8 caracteres</span>
          </div>
        </li>

        <li class="main__item main__item--fb-100">
          <button #btnForm class="main__button" type="submit" [disabled]="registerForm.invalid" *ngIf="!currentUserId">{{ "register" | translate }}</button>
          <button #btnForm class="main__button" type="submit" [disabled]="registerForm.invalid" *ngIf="currentUserId">{{ "create_user" | translate }}</button>
        </li>
      </ul>
    </form>
  </div>
</main> -->

<main class="container" fxLayout="column" fxLayoutAlign="center center">
  <h1 class="container__title" translate="{{ !currentUserId ? 'register' : 'new_user' }}"></h1>
  <form class="container__form" [formGroup]="registerForm" (ngSubmit)="onRegister()">
    <ul class="container__list" fxLayout="row wrap" fxLayout.lt-sm="column">
      <li class="container__item" fxLayout="row" fxFlexFill fxLayout.lt-sm="column" fxLayoutGap="16px" fxLayoutGap.gt-xs="24px">
        <!-- Nombre -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "name" | translate }} (*)</mat-label>
          <input matInput type="text" id="name" [formControl]="name" placeholder="{{ 'name' | translate }}" />
          <mat-error *ngIf="registerForm.get('name').errors && (registerForm.get('name').touched || registerForm.get('name').dirty)">
            <span class="container__error" *ngIf="registerForm.get('name').errors?.required">{{ "errors.required" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('name').errors?.minlength">{{ "errors.minlength_3" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('name').errors?.maxlength">{{ "errors.maxlength_55" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('name').errors?.pattern">{{ "errors.pattern" | translate }}</span>
          </mat-error>
        </mat-form-field>

        <!-- Email -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "email" | translate }} (*)</mat-label>
          <input matInput type="email" id="email" [formControl]="email" placeholder="{{ 'email' | translate }}" />
          <mat-error *ngIf="registerForm.get('email').errors && (registerForm.get('email').touched || registerForm.get('email').dirty)">
            <span class="container__error" *ngIf="registerForm.get('email').errors?.required">{{ "errors.required" | translate }}</span>
            <span
              class="container__error"
              *ngIf="!registerForm.get('email').errors?.required && (registerForm.get('email').errors?.email || registerForm.get('email').errors?.emailValidator)"
            >
              {{ "errors.email" | translate }}
            </span>
          </mat-error>
        </mat-form-field>
      </li>

      <li class="container__item" fxLayout="row" fxFlexFill fxLayout.lt-sm="column" fxLayoutGap="16px" fxLayoutGap.gt-xs="24px">
        <!-- Postal code -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "postal_code" | translate }} (*)</mat-label>
          <input matInput type="text" id="cp" [formControl]="cp" placeholder="{{ 'postal_code' | translate }}" />
          <mat-error *ngIf="registerForm.get('cp').errors && (registerForm.get('cp').touched || registerForm.get('cp').dirty)">
            <span class="container__error" *ngIf="registerForm.get('cp').errors?.required">{{ "errors.required" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('cp').errors?.pattern">{{ "errors.pattern_digits" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('cp').errors?.maxlength || registerForm.get('cp').errors?.minlength">{{ "errors.length_5" | translate }}</span>
          </mat-error>
        </mat-form-field>

        <!-- Street -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "street" | translate }} (*)</mat-label>
          <input matInput type="text" id="street" [formControl]="street" placeholder="{{ 'street' | translate }}" />
          <mat-error *ngIf="registerForm.get('street').errors && (registerForm.get('street').touched || registerForm.get('street').dirty)">
            <span class="container__error" *ngIf="registerForm.get('street').errors?.required">{{ "errors.required" | translate }}</span>
          </mat-error>
        </mat-form-field>
      </li>

      <li class="container__item" fxLayout="row" fxFlexFill fxLayout.lt-sm="column" fxLayoutGap="16px" fxLayoutGap.gt-xs="24px">
        <!-- Code -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "code" | translate }} (*)</mat-label>
          <mat-select [formControl]="code">
            <mat-option [value]="null" [disabled]="true">{{ "select_a_code" | translate }}</mat-option>
            <mat-option *ngFor="let code of codes" [value]="code">{{ code }}</mat-option>
          </mat-select>
          <mat-error *ngIf="registerForm.get('code').errors && (registerForm.get('code').touched || registerForm.get('code').dirty)">
            <span class="container__error" *ngIf="registerForm.get('code').errors?.required">{{ "errors.required" | translate }}</span>
          </mat-error>
        </mat-form-field>

        <!-- Telephone -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "telephone" | translate }} (*)</mat-label>
          <input matInput type="text" id="telephone" [formControl]="telephone" placeholder="{{ 'telephone' | translate }}" />
          <mat-error *ngIf="registerForm.get('telephone').errors && (registerForm.get('telephone').touched || registerForm.get('telephone').dirty)">
            <span class="container__error" *ngIf="registerForm.get('telephone').errors?.required">{{ "errors.required" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('telephone').errors?.pattern">{{ "errors.pattern_digits" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('telephone').errors?.maxlength || registerForm.get('telephone').errors?.minlength">{{
              "errors.length_9" | translate
            }}</span>
          </mat-error>
        </mat-form-field>
      </li>

      <li class="container__item" fxLayout="row" fxFlexFill fxLayout.lt-sm="column" fxLayoutGap="16px" fxLayoutGap.gt-xs="24px">
        <!-- Account type (role) -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "account_type" | translate }} (*)</mat-label>
          <mat-select [formControl]="role">
            <mat-option [value]="null" [disabled]="true">{{ "select_a_role" | translate }}</mat-option>
            <mat-option *ngFor="let role of roles" [value]="role">{{ role | translate }}</mat-option>
          </mat-select>
          <mat-error *ngIf="registerForm.get('role').errors && (registerForm.get('role').touched || registerForm.get('role').dirty)">
            <span class="container__error" *ngIf="registerForm.get('role').errors?.required">{{ "errors.required" | translate }}</span>
          </mat-error>
        </mat-form-field>

        <!-- Province -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "province" | translate }} (*)</mat-label>
          <mat-select [formControl]="province">
            <mat-option [value]="null" [disabled]="true">{{ "select_a_province" | translate }}</mat-option>
            <mat-option *ngFor="let province of provinces" [value]="province">{{ province | translate }}</mat-option>
          </mat-select>
          <mat-error *ngIf="registerForm.get('province').errors && (registerForm.get('province').touched || registerForm.get('province').dirty)">
            <span class="container__error" *ngIf="registerForm.get('province').errors?.required">{{ "errors.required" | translate }}</span>
          </mat-error>
        </mat-form-field>
      </li>

      <li class="container__item" fxLayout="row" fxFlexFill fxLayout.lt-sm="column" fxLayoutGap="16px" fxLayoutGap.gt-xs="24px">
        <!-- Password -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "password" | translate }} (*)</mat-label>
          <input matInput [type]="hidePassword ? 'password' : 'text'" id="password" [formControl]="password" placeholder="{{ 'password' | translate }}" />
          <button type="button" mat-icon-button matSuffix (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hidePassword">
            <mat-icon>{{ hidePassword ? "visibility_off" : "visibility" }}</mat-icon>
          </button>
          <mat-error *ngIf="registerForm.get('password').errors && (registerForm.get('password').touched || registerForm.get('password').dirty)">
            <span class="container__error" *ngIf="registerForm.get('password').errors?.required">{{ "errors.required" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('password').errors?.minlength">{{ "errors.minlength_8" | translate }}</span>
          </mat-error>
        </mat-form-field>

        <!-- Password confirm -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "confirm_password" | translate }} (*)</mat-label>
          <input
            matInput
            [type]="hideConfirmPassword ? 'password' : 'text'"
            id="repeat_password"
            [formControl]="repeat_password"
            placeholder="{{ 'confirm_password' | translate }}"
            (input)="passwordOnInput()"
          />
          <button
            type="button"
            mat-icon-button
            matSuffix
            (click)="hideConfirmPassword = !hideConfirmPassword"
            [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hideConfirmPassword"
          >
            <mat-icon>{{ hideConfirmPassword ? "visibility_off" : "visibility" }}</mat-icon>
          </button>
          <mat-error *ngIf="registerForm.get('repeat_password').errors && (registerForm.get('repeat_password').touched || registerForm.get('repeat_password').dirty)">
            <span class="container__error" *ngIf="registerForm.get('repeat_password').errors?.required">{{ "errors.required" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('repeat_password').errors?.equalValue && !registerForm.get('repeat_password').errors?.required">{{
              "errors.passwords_equalValue" | translate
            }}</span>
          </mat-error>
        </mat-form-field>
      </li>

      <!-- Sign in button -->
      <li class="container__item" align="end" fxFlexFill>
        <button class="container__button" mat-flat-button color="primary" type="submit" [disabled]="registerForm.invalid || btnSubmitted">
          <app-loading *ngIf="btnSubmitted" class="container__loading" [diameter]="20" [display]="'inline'"></app-loading>
          <span *ngIf="!currentUserId">{{ "register" | translate }}</span>
          <span *ngIf="currentUserId">{{ "create_user" | translate }}</span>
        </button>
      </li>
    </ul>
  </form>
</main>
