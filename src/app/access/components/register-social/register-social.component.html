<main class="container" fxLayout="column" fxLayoutAlign="center center">
  <h1 class="container__title">{{ "register" | translate }}</h1>
  <p>{{ "register_description" | translate }}</p>
  <form class="container__form" [formGroup]="registerForm" (ngSubmit)="onRegister()">
    <ul class="container__list">
      <li class="container__item" fxLayout="row" fxFlexFill fxLayout.lt-sm="column" fxLayoutGap="16px" fxLayoutGap.gt-xs="24px">
        <!-- Postal code -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "postal_code" | translate }} (*)</mat-label>
          <input matInput type="text" id="cp" [formControl]="cp" placeholder="{{ 'postal_code' | translate }}" />
          <mat-error *ngIf="registerForm.get('cp').errors && (registerForm.get('cp').touched || registerForm.get('cp').dirty)">
            <span class="container__error" *ngIf="registerForm.get('cp').errors?.required">{{ "errors.required" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('cp').errors?.pattern">{{ "errors.pattern_digits" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('cp').errors?.maxlength || registerForm.get('cp').errors?.minlength">{{ "errors.length_5" | translate }}</span>
          </mat-error>
        </mat-form-field>

        <!-- Street -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "street" | translate }} (*)</mat-label>
          <input matInput type="text" id="street" [formControl]="street" placeholder="{{ 'street' | translate }}" />
          <mat-error *ngIf="registerForm.get('street').errors && (registerForm.get('street').touched || registerForm.get('street').dirty)">
            <span class="container__error" *ngIf="registerForm.get('street').errors?.required">{{ "errors.required" | translate }}</span>
          </mat-error>
        </mat-form-field>
      </li>

      <li class="container__item" fxLayout="row" fxFlexFill fxLayout.lt-sm="column" fxLayoutGap="16px" fxLayoutGap.gt-xs="24px">
        <!-- Code -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "code" | translate }} (*)</mat-label>
          <mat-select [formControl]="code">
            <mat-option [value]="null" [disabled]="true">{{ "select_a_code" | translate }}</mat-option>
            <mat-option *ngFor="let code of codes" [value]="code">{{ code }}</mat-option>
          </mat-select>
          <mat-error *ngIf="registerForm.get('code').errors && (registerForm.get('code').touched || registerForm.get('code').dirty)">
            <span class="container__error" *ngIf="registerForm.get('code').errors?.required">{{ "errors.required" | translate }}</span>
          </mat-error>
        </mat-form-field>

        <!-- Telephone -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "telephone" | translate }} (*)</mat-label>
          <input matInput type="text" id="telephone" [formControl]="telephone" placeholder="{{ 'telephone' | translate }}" />
          <mat-error *ngIf="registerForm.get('telephone').errors && (registerForm.get('telephone').touched || registerForm.get('telephone').dirty)">
            <span class="container__error" *ngIf="registerForm.get('telephone').errors?.required">{{ "errors.required" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('telephone').errors?.pattern">{{ "errors.pattern_digits" | translate }}</span>
            <span class="container__error" *ngIf="registerForm.get('telephone').errors?.maxlength || registerForm.get('telephone').errors?.minlength">{{
              "errors.length_9" | translate
            }}</span>
          </mat-error>
        </mat-form-field>
      </li>

      <li class="container__item" fxLayout="row" fxFlexFill fxLayout.lt-sm="column" fxLayoutGap="16px" fxLayoutGap.gt-xs="24px">
        <!-- Account type (role) -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "account_type" | translate }} (*)</mat-label>
          <mat-select [formControl]="role">
            <mat-option [value]="null" [disabled]="true">{{ "select_a_role" | translate }}</mat-option>
            <mat-option *ngFor="let role of roles" [value]="role">{{ role | translate }}</mat-option>
          </mat-select>
          <mat-error *ngIf="registerForm.get('role').errors && (registerForm.get('role').touched || registerForm.get('role').dirty)">
            <span class="container__error" *ngIf="registerForm.get('role').errors?.required">{{ "errors.required" | translate }}</span>
          </mat-error>
        </mat-form-field>

        <!-- Province -->
        <mat-form-field appearance="fill">
          <mat-label>{{ "province" | translate }} (*)</mat-label>
          <mat-select [formControl]="province">
            <mat-option [value]="null" [disabled]="true">{{ "select_a_province" | translate }}</mat-option>
            <mat-option *ngFor="let province of provinces" [value]="province">{{ province | translate }}</mat-option>
          </mat-select>
          <mat-error *ngIf="registerForm.get('province').errors && (registerForm.get('province').touched || registerForm.get('province').dirty)">
            <span class="container__error" *ngIf="registerForm.get('province').errors?.required">{{ "errors.required" | translate }}</span>
          </mat-error>
        </mat-form-field>
      </li>

      <!-- Sign in button -->
      <li class="container__item" align="end" fxFlexFill>
        <button class="container__button" mat-flat-button color="primary" type="submit" [disabled]="registerForm.invalid || btnSubmitted">
          <app-loading *ngIf="btnSubmitted" class="container__loading" [diameter]="20" [display]="'inline'"></app-loading>
          <span>{{ "register" | translate }}</span>
        </button>
      </li>
    </ul>
  </form>
</main>
